<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Delft3D Project Example</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
        <link rel="stylesheet" href="https://unpkg.com/leaflet-compass/dist/leaflet-compass.css">
        <link rel="stylesheet" href="static/temp_style.css?v=123">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <!-- Add the header -->
        <header class="header">
            <h1>Delft3D Project Example</h1>
        </header>
        <!-- Add the menu button -->
        <button type="button" id="menuBtn" onclick="toggleMenu()">
            <img src="images/menu.png" width="60px" alt="Menu">
        </button>
        <!-- Add the map -->
        <div id="map_container">
            <div id="leaflet_map"></div>
            <button type="button" id="custom_compass_btn">
                <img src="images/compass.png?v=1234"alt="Compass">
            </button>
            <iframe id="iframe_map" title="Map"></iframe>
            <div id="loadingOverlay">
                <div class="loading-text">Processing Data. Please wait...</div>
                <div class="spinner"></div>
            </div>
        </div>

        <!-- Add the left side-bar menu -->
        <div id="offCanvasMenu">
            <a onclick="history.back()">Home</a>
            <a onclick="openProjectSummary('summary.json')">Project Summary</a>
            <div class="menu-item-with-submenu">
                <a class="menu-link">Points <span class="arrow">&#x25B8;</span></a>
                <div class="submenu">
                    <a onclick="loadData('stations.geojson', 'stations')"> Show/Unshow Stations</a>
                    <a onclick="makeQuery('point', '')"> Query Point</a>




                </div>
            </div>
            <div class="menu-item-with-submenu">
                <a class="menu-link">Profile <span class="arrow">&#x25B8;</span></a>
                <div class="submenu">
                    <a> Show/Unshow Cross-sections</a>
                    <a onclick="makeQuery('path', '')"> Query/Unquery Path</a>





                </div>
            </div>
            <div class="menu-item-with-submenu">
                <a class="menu-link">Global Parameters <span class="arrow">&#x25B8;</span></a>
                <div class="submenu">
                    <!-- Water Balance -->
                    <div class="menu-item-with-submenu">
                        <a class="menu-link">Water Balance <span class="arrow">&#x25B8;</span></a>
                        <div class="submenu">
                            <a onclick="loadData('waterbalance_totalvolume.json', 'waterbalance_totalvolume', 'Total Volume (m<sup>3</sup>)')"> Total Volume</a>
                            <a onclick="loadData('waterbalance_storage.json', 'waterbalance_storage', 'Storage (m<sup>3</sup>)')"> Storage</a>
                            <a onclick="loadData('waterbalance_boundariesin.json', 'waterbalance_boundariesin', 'Inflow (Boundaries) (m<sup>3</sup>)')"> Inflow from Boundaries</a>
                            <a onclick="loadData('waterbalance_boundariesout.json', 'waterbalance_boundariesout', 'Outflow (Boundaries) (m<sup>3</sup>)')"> Outflow from Boundaries</a>
                            <a onclick="loadData('waterbalance_boundariestotal.json', 'waterbalance_boundariestotal', 'Total (Boundaries) (m<sup>3</sup>)')"> Total from Boundaries</a>
                            <a onclick="loadData('waterbalance_precipitation.json', 'waterbalance_precipitation', 'Total (Precipitation) (m<sup>3</sup>)')"> Total from Precipitation</a>
                            <a onclick="loadData('waterbalance_evaporation.json', 'waterbalance_evaporation', 'Total (Precipitation) (m<sup>3</sup>)')"> Total from Evaporation</a>
                            <a onclick="loadData('waterbalance_sourcesink.json', 'waterbalance_sourcesink', 'Source/Sink (m<sup>3</sup>)')"> Source/Sink</a>
                            <a onclick="loadData('waterbalance_groundwaterin.json', 'waterbalance_groundwaterin', 'Inflow (Groundwater) (m<sup>3</sup>)')"> Inflow from Groundwater</a>
                            <a onclick="loadData('waterbalance_groundwaterout.json', 'waterbalance_groundwaterout', 'Outflow (Groundwater) (m<sup>3</sup>)')"> Outflow from Groundwater</a>
                            <a onclick="loadData('waterbalance_groundwatertotal.json', 'waterbalance_groundwatertotal', 'Total (Groundwater) (m<sup>3</sup>)')"> Total from Groundwater</a>
                            <a onclick="loadData('waterbalance_precipitationonground.json', 'waterbalance_precipitationonground', 'Precipitation on Ground (m<sup>3</sup>)')"> Precipitation on Ground</a>
                            <a onclick="loadData('waterbalance_volumeerror.json', 'waterbalance_volumeerror', 'Volume Error (%)')"> Volume Error</a>
                        </div>
                    </div>
                    <!-- Meteorological -->
                    <div class="menu-item-with-submenu">
                        <a class="menu-link">Meteorological <span class="arrow">&#x25B8;</span></a>
                        <div class="submenu">
                            <a onclick="loadData('precipitation.json', 'precipitation', 'Precipitation (mm)')">Precipitation</a>
                            <a onclick="loadData('wind.json', 'wind', 'Wind (m/s)')">Wind</a>
                            <a onclick="loadData('air_temperature.json', 'air_temperature', 'Air Temperature (°C)')">Air Temperature</a>
                            <a onclick="loadData('relative_humidity.json', 'relative_humidity', 'Relative Humidity (%)')">Relative Humidity</a>
                            <a onclick="loadData('solar_radiation.json', 'solar_radiation', 'Solar Radiation (W/m<sup>2</sup>)')">Solar Radiation</a>
                            <a onclick="loadData('evaporation.json', 'evaporation', 'Evaporation (mm)')">Evaporation</a>
                            <a onclick="loadData('longwave_radiation.json', 'longwave_radiation', 'Longwave Radiation (W/m<sup>2</sup>)')">Longwave Radiation</a>
                            <a onclick="loadData('frequency_evaporation.json', 'frequency_evaporation', 'Evaporation Frequency (%)')">Evaporation Frequency</a>
                            <a onclick="loadData('frequency_convection.json', 'frequency_convection', 'Convection Frequency (%)')">Convection Frequency</a>
                            <a onclick="loadData('cloud_cover.json', 'cloud_cover', 'Cloud Cover (%)')">Cloud Cover</a>
                        </div>
                    </div>
                </div>
            </div>            
        </div>

        <!-- Add the right side-bar menu -->
        <div id="infoPanel">
            <div id="infoPanelHeader">Information<span id="arrowToggle">▲</span></div>
            <div class="menu-item-with-submenu">
                <a class="menu-link">Water Quality <span class="arrow">&#x25B8;</span></a>
                <div class="submenu">
                    <a > Temperature</a>
                    <a > Salinity</a>
                    <a > Turbidity</a>
                    <a > Contaminant 1</a>
                </div>
            </div>
            <div class="menu-item-with-submenu">
                <a class="menu-link">Hydrodynamics <span class="arrow">&#x25B8;</span></a>
                <div class="submenu">
                    <a onclick="loadData('waterlevel.json', 'waterlevel', 'Water Level (m)')"> Water Level</a>
                    <a onclick="loadData('waterdepth.json', 'waterdepth', 'Water Depth (m)')"> Water Depth</a>
                    <a onclick="loadData('total_runoff.json', 'total_runoff', 'Total Runoff (m<sup>3</sup>)')"> Total Runoff</a>
                    <!-- <a onclick="loadData('bed_shear_stress.json', 'bed_shear_stress', 'Bed Shear Stress (kPa)')"> Bed Shear Stress</a> -->
                    <a > Velocity (2D)</a>
                    <a > Velocity (3D)</a>
                    <a > Sediment Thickness</a>
                </div>
            </div>
            
            <div class="menu-item-with-submenu">
                <a class="menu-link">Static <span class="arrow">&#x25B8;</span></a>
                <div class="submenu">
                    <a onclick="loadData('default_map.geojson', 'default_map')"> Default Map</a>
                    <a > Cell Size</a>
                    <a > Bed Depth</a>





                </div>
            </div>
            <div id="infoDetails">
                <div id="infoDetailsHeader">Point Info</div>
                <div id="infoDetailsContent"></div>
            </div>
        </div>

        <!-- Add the summary window -->
        <div id="infoWindow">
            <div id="infoHeader">Summary<span onclick="openProjectSummary('summary.json')" id="closeInfoBtn">×</span></div>
            <div id="infoContent"></div>
        </div>
        
        <!-- Bottom bar -->
        <div id="chartPanel">
            <div id="chartHeader">
                <button type="button" id="closeChartBtn" onclick="toggleChart('')">&times;</button>
                <button type="button" id="downloadBtn" onclick="viewData()">View Data</button>
                <button type="button" id="downloadExcel" onclick="saveToExcel()">Download Excel</button>
            </div>
            <div id="myChart"></div>
        </div>
    </body>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-compass/dist/leaflet-compass.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.26.1.min.js"></script>
    <script src="https://unpkg.com/leaflet.vectorgrid@1.3.0/dist/Leaflet.VectorGrid.bundled.js"></script>
    <!-- Load the newest version of the script -->
    <script>
        const script = document.createElement('script');
        script.src = `static/temp_script.js?v=${Date.now()}`;
        document.body.appendChild(script);
    </script>
</html>