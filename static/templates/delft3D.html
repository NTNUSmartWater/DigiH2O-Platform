<!DOCTYPE html>
<html lang="en">
    <head>
        <title>DigiWater Simulation Platform</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Third-party libraries -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
        <link rel="stylesheet" href="https://unpkg.com/leaflet-compass/dist/leaflet-compass.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nouislider@15.7.1/dist/nouislider.min.css">
        <!-- My styles -->
        <link rel="stylesheet" href="static/css/temp_style.css?v=10">
        <link rel="stylesheet" href="static/css/temp_menu.css?v=1">
        <!-- Favicon -->
        <link rel="icon" type="image/png" href="static/images/Logo.png">
    </head>
    <body>
        <!-- Add the header -->
        <header class="header">
            <nav class="nav">
                <ul class="nav-left">
                    <li><a class="menu" data-info="0|project_menu.html">Project Management</a></li>
                    <li style="border-left:3px solid #d5d4dd; margin-left:5px; padding-left:5px;">
                        <a class="menu" data-info="1|generalMenu.html">General Options</a>
                    </li>
                    <li><a class="menu" data-info="2|measuredPoints.html">Measured Points</a></li>
                    <li><a class="menu" data-info="3|dynamicMap.html">Dynamic Map</a></li>
                    <li><a class="menu" data-info="4|staticMap.html">Static Map</a></li>
                </ul>
                <ul class="nav-middle">
                    <span id="projectTitle"></span>
                </ul>
                <ul class="nav-right">
                    <li><a data-info="home">Home</a></li>
                    <li><a data-info="help">Help</a></li>
                </ul>
            </nav>
        </header>
        <!-- Add a popup menu -->
        <div class="popup-menu" id="popup-menu">
            <div id="popup-content"></div>
        </div>
        <!-- Add the control for the map -->
        <div id="right-side-controls">
            <!-- Add base map button and compass on one row -->
            <button type="button" id="custom_compass_btn">
                <img src="static/images/compass.png?v=2"alt="Compass">
            </button>
            <!-- Add a popup menu for base map -->
            <div class="basemap-container">
                <button type="button" id="custom_map_background_btn">
                    <img src="static/images/basemap.png?v=3" alt="Basemap">
                </button>
                <div id="basemap-popup">
                    <div><strong>Select Base Map</strong></div>
                    <button class="basemap-option" data-url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png">Open Street Map</button>
                    <button class="basemap-option" data-url="https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}">Satellite</button>
                    <button class="basemap-option" data-url="https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}">Street</button>
                    <button class="basemap-option" data-url="https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png">Carto Light</button>
                    <button class="basemap-option" data-url="https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png">Carto Dark</button>
                </div>
            </div>
            <!--Add Color Legend-->
            <div id="colorbar-container">
                <div id="custom-colorbar">
                    <div class="colorbar-wrapper">
                        <div class="colorbar-title" id="colorbar-title">Legend</div>
                        <div class="colorbar-gradient" id="colorbar-gradient"></div>
                        <div class="colorbar-labels" id="colorbar-labels">
                            <div></div> <!-- max -->
                            <div></div> <!-- 75% -->
                            <div></div> <!-- 50% -->
                            <div></div> <!-- 25% -->
                            <div></div> <!-- min -->
                        </div>
                    </div>
                </div>
                <div id="custom-colorbar-vector">
                    <div class="colorbar-wrapper">
                        <div class="colorbar-title" id="colorbar-title-vector">Legend</div>
                        <div class="colorbar-gradient" id="colorbar-gradient-vector"></div>
                        <div class="colorbar-labels" id="colorbar-labels-vector">
                            <div></div> <!-- max -->
                            <div></div> <!-- 75% -->
                            <div></div> <!-- 50% -->
                            <div></div> <!-- 25% -->
                            <div></div> <!-- min -->
                        </div>
                    </div>
                    <div id="custom-colorbar-scaler">Scaler</div>
                </div>
            </div>
        </div>
        <!-- Add the map -->
        <div id="map_container">
            <div id="leaflet_map"></div>
            <!-- Add time slider -->
            <div id="time-controls">
                <button id="play-btn">â–¶ Play</button>
                <div id="time-slider"></div>
                <!-- <button id="export-video-btn">ðŸ’¾ Export Video</button>
                <div id="export-progress-container" style="display:none; margin-top:10px; width: 100%;">
                <div id="export-progress-bar" style="width: 0%; height: 8px; background: limegreen;
                    border-radius: 4px; transition: width 0.2s ease;"></div>
                </div> -->
            </div>
            <div id="loadingOverlay">
                <div class="loading-text">Processing Data. Please wait...</div>
                <div class="spinner"></div>
            </div>
        </div>
        <!-- Add the right side-bar menu -->  
        <div id="infoDetails">
            <div id="infoDetailsHeader">Point Info</div>
            <div id="infoDetailsContent"></div>
        </div>
        <!-- Add a floating window for project summary -->
        <div id="summaryWindow">
            <div id="summaryHeader">Project Summary<span id="closeSummaryOption">Ã—</span></div>
            <div id="summaryContent"></div>
        </div>
        <!-- Add a floating window for contact information -->
        <div id="informationContact">
            <div id="informationContactHeader">Contact Information<span id="closeInformationContact">Ã—</span></div>
            <div id="informationContactContent"></div>
        </div>
        <!-- Add a floating window for open project -->
        <div id="projectWindow">
            <div id="projectWindowHeader">Project Setup<span id="closeProjectWindow">Ã—</span></div>
            <div id="projectWindowContent"></div>
        </div>
         <!-- Add a floating window for running a simulation -->
        <div id="simulationWindow">
            <div id="simulationWindowHeader">Run Simulation<span id="closeSimulationWindow">Ã—</span></div>
            <div id="simulationWindowContent"></div>
        </div>

        <!-- Add a floating plot window -->
        <div id="plotWindow">
            <div id="plotHeader"><span id="plotTitle">Plot Window</span><span id="closePlotBtn">Ã—</span></div>
            <div class="plot-controls">
                <label for="select-object" style="margin-left: 30px;">Select:</label>
                 <div class="select-object" id="select-object">
                    <div class="select-box">
                        <span class="label-text">Select one or more options</span>
                        <span class="arrow">â–¼</span>
                    </div>
                    <div class="checkbox-list"></div>
                </div>
                <button type="button" id="viewDataBtn">View Data</button>
                <button type="button" id="downloadExcel">Download Excel</button>
            </div>
            <div id="plotContainer">
                <div id="myChart"></div>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
        <script src="https://unpkg.com/leaflet-compass/dist/leaflet-compass.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
        <script src="https://cdn.plot.ly/plotly-2.26.1.min.js"></script>
        <script src="https://unpkg.com/leaflet.vectorgrid@1.3.0/dist/Leaflet.VectorGrid.bundled.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/nouislider@15.7.1/dist/nouislider.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/antimatter15/whammy/whammy.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
        <!-- Load the newest version of the script -->
        <script type="module">
            const script = document.createElement('script');
            script.type = 'module';
            script.src = `static/js/uiManager.js`;
            document.body.appendChild(script);
        </script>
    </body>
</html>